(function(t){function e(e){for(var o,i,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],o=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(o=!1)}o&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},a={app:0},s=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Header"),n("div",[n("div",{staticClass:"container",attrs:{id:"main-content"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("form",{staticClass:"form-inline"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"connect"}},[t._v("WebSocket connection:")]),n("button",{staticClass:"btn btn-default",attrs:{id:"connect",type:"submit",disabled:1==t.connected},on:{click:function(e){return e.preventDefault(),t.connect.apply(null,arguments)}}},[t._v(" Connect ")]),n("button",{staticClass:"btn btn-default",attrs:{id:"disconnect",type:"submit",disabled:0==t.connected},on:{click:function(e){return e.preventDefault(),t.disconnect.apply(null,arguments)}}},[t._v(" Disconnect ")])])])]),n("div",{staticClass:"col-md-6"},[n("form",{staticClass:"form-inline"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"name"}},[t._v("What is your name?")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.send_message,expression:"send_message"}],staticClass:"form-control",attrs:{type:"text",id:"name",placeholder:"Your name here..."},domProps:{value:t.send_message},on:{input:function(e){e.target.composing||(t.send_message=e.target.value)}}})]),n("button",{staticClass:"btn btn-default",attrs:{id:"send",type:"submit"},on:{click:function(e){return e.preventDefault(),t.send.apply(null,arguments)}}},[t._v(" Send ")])])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("table",{staticClass:"table table-striped",attrs:{id:"conversation"}},[t._m(0),n("tbody",t._l(t.received_messages,(function(e){return n("tr",{key:e},[n("td",[t._v(t._s(e))])])})),0)])])])])]),n("router-view")],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("Greetings")])])])}],i=(n("e9c4"),n("cc7d")),r=n.n(i),c=n("c6e1"),l=n.n(c),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"header"},[n("div",{staticClass:"header-container"},[n("div",{staticClass:"header__title"},[t._v("Диспетчерский центр")]),n("div",{staticClass:"header__exit"},[n("svg",{staticClass:"svg-inline--fa fa-sign-out-alt fa-w-16",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"sign-out-alt",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{fill:"white",d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}})]),n("span",{staticClass:"header__exit-title",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.exit()}}},[t._v("Выход")])])])])},d=[],p=n("ade3"),m=(n("d3b7"),n("bc3a")),f=n.n(m),v=function(t){try{return JSON.parse(localStorage.getItem(t))}catch(e){return console.log("Error getting data from localStorage",e),null}},h=function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.log("Error saving data from localStorage",n)}};f.a.defaults.baseURL="http://90.189.217.244:9016",f.a.interceptors.request.use((function(t){var e=v("accessTokenStore"),n=e?"".concat(e):"";return""===n?console.log(t):t.headers.Authorization=n,console.log(t),t}));var g=f.a,_=g.create({baseURL:"http://90.189.217.244:9016"}),b=function(t){return _.post("/api/1/login/engineer",t,{useCredentails:!0})},C={login:b},S=n("8c4f"),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-login"},[n("div",{staticClass:"login"},[n("div",{staticClass:"login__img"}),t._m(0),n("div",{staticClass:"error-messages"},[t.validationErrors?n("AppValidationErrors",{attrs:{"validation-errors":t.validationErrors}}):t._e()],1),n("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[n("fieldset",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Логин",name:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),n("fieldset",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",name:"password",placeholder:"Пароль"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("input",{staticClass:"button btn-primary",attrs:{type:"button",value:"Вход"},on:{click:function(e){return t.onSubmit()}}})])])])},w=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login__title"},[n("p",[t._v("Диспетчерский центр")])])}],x=n("5530"),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"error-messages-item"},[n("li",[t._v(" "+t._s(t.validationErrors.message)+" ")])])},k=[],E={name:"AppValidationErrors",props:{validationErrors:{type:Object,required:!0}},computed:{}},j=E,A=n("2877"),$=Object(A["a"])(j,O,k,!1,null,null,null),T=$.exports,L=n("2f62"),P={name:"AppLogin",data:function(){return{email:"",password:"",title:"Авторизация"}},components:{AppValidationErrors:T},computed:Object(x["a"])({},Object(L["b"])({validationErrors:function(t){return t.auth.validationErrors}})),methods:{onSubmit:function(){var t=this;this.$store.dispatch(nt.login,{email:this.email,password:this.password}).then((function(){t.validationErrors||t.$router.push({name:"Home"})})).catch((function(t){console.log("Ошибка",t)}))}},beforeMount:function(){document.title=this.title},beforeUpdate:function(){document.title=this.title}},H=P,D=Object(A["a"])(H,y,w,!1,null,null,null),N=D.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dispatcher"},[n("div",{staticClass:"dispatcher-table"},[n("TableDespatcher")],1)])},M=[],I=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},V=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table"},[n("table",[n("thead",[n("tr",[n("th",[t._v("№")]),n("th",[t._v("Статус")]),n("th",[t._v("Время Начала")]),n("th",[t._v("Время Обновления")]),n("th",[t._v("Название")]),n("th",[t._v("Устройство")]),n("th",[t._v("Владелец")]),n("th",[t._v("Экипаж")]),n("th",[t._v("Время с начала")]),n("th",[t._v("Результат")])])]),n("tbody",[n("tr",[n("td",[t._v("1")]),n("td",[t._v("Новая")]),n("td",[t._v("17:01:56 14.02.2022")]),n("td",[t._v("17:01:56 14.02.2022")]),n("td",[t._v("Сирена")]),n("td",[t._v("00000099989989")]),n("td",[t._v("Александр")]),n("td",[t._v("1")]),n("td",[t._v("17:01:56 14.02.2022")]),n("td",[t._v("Ok")])])])])])}],F={name:"AppTable"},z=F,U=Object(A["a"])(z,I,V,!1,null,null,null),q=U.exports,R={components:{TableDespatcher:q},name:"AppHomeDisp",data:function(){return{received_messages:[],send_message:null,connected:!1}}},W=R,B=Object(A["a"])(W,J,M,!1,null,null,null),G=B.exports;o["a"].use(S["a"]);var Y,K,Q=[{path:"/",name:"Home",component:G},{path:"/login",name:"login",component:N,meta:{Auth:!1}}],X=new S["a"]({mode:"history",base:"/",routes:Q}),Z=X,tt={isLoading:!1,token:localStorage.getItem("accessTokenStore")||"",isAuthenticated:!1,validationErrors:null},et={loginStart:"[auth] loginStart",loginSuccess:"[auth] loginSuccess",loginFailure:"[auth] loginFailure",exitLoginSuccess:"[auth] exit success"},nt={login:"[auth] login",exitLogin:"[auth] exit"},ot=(Y={},Object(p["a"])(Y,et.loginStart,(function(t){t.isAuthenticated=!1,t.validationErrors=null})),Object(p["a"])(Y,et.loginSuccess,(function(t,e){t.isAuthenticated=!0,t.token=e})),Object(p["a"])(Y,et.loginFailure,(function(t,e){t.isAuthenticated=!1,t.validationErrors=e})),Object(p["a"])(Y,et.exitLoginSuccess,(function(t){t.token="",t.isAuthenticated=!0})),Y),at=(K={},Object(p["a"])(K,nt.exitLogin,(function(t){t.commit(et.exitLoginSuccess),localStorage.removeItem("accessTokenStore"),delete f.a.defaults.headers.common["Authorization"],Z.push({name:"login"})})),Object(p["a"])(K,nt.login,(function(t,e){return new Promise((function(n){t.commit(et.loginStart),C.login(e).then((function(e){if("SUCCESS"===e.data.status){var o=e.data.result.token;window.localStorage.setItem("accessTokenStore",e.data.result.token),h("accessTokenStore",e.data.result.token),t.commit(et.loginSuccess,o)}else t.commit(et.loginFailure,e.data),localStorage.removeItem("accessTokenStore");n(e.data)})).catch((function(e){t.commit(et.loginFailure,e.data),console.log("ошибка",e)}))}))})),K),st={state:tt,mutations:ot,actions:at},it={name:"AppHeader",methods:{exit:function(){this.$store.dispatch(nt.exitLogin).then((function(){})).catch((function(t){console.log("Ошибка",t)}))}}},rt=it,ct=Object(A["a"])(rt,u,d,!1,null,null,null),lt=ct.exports,ut={name:"App",data:function(){return{received_messages:[],send_message:null,connected:!1}},components:{Header:lt},methods:{send:function(){if(console.log("Send message:"+this.send_message),this.stompClient&&this.stompClient.connected){var t={name:this.send_message};console.log(JSON.stringify(t)),this.stompClient.send("/app/hello",JSON.stringify(t),{})}},connect:function(){var t=this;this.socket=new r.a("http://109.111.185.150:9011/hello"),this.stompClient=l.a.over(this.socket),this.stompClient.connect({},(function(e){t.connected=!0,console.log("Connected"+e),t.stompClient.subscribe("/topic/greetings",(function(e){console.log(e.body,"tick"),t.received_messages.push(JSON.parse(e.body).content)}))}),(function(e){console.log(e),t.connected=!1}))},disconnect:function(){this.stompClient&&this.stompClient.disconnect(),this.connected=!1},tickleConnection:function(){this.connected?this.disconnect():this.connect()}}},dt=ut,pt=Object(A["a"])(dt,a,s,!1,null,null,null),mt=pt.exports;o["a"].use(L["a"]);var ft=new L["a"].Store({state:{},mutations:{},actions:{},modules:{auth:st}}),vt=(n("78a7"),n("2699")),ht=n("a40a"),gt=n("4e2b");o["a"].component("l-map",vt["a"]),o["a"].component("l-tile-layer",ht["a"]),o["a"].component("l-marker",gt["a"]),o["a"].config.productionTip=!1,new o["a"]({router:Z,store:ft,render:function(t){return t(mt)}}).$mount("#app")},"78a7":function(t,e,n){}});
//# sourceMappingURL=app.e3cf737d.js.map